<!DOCTYPE html>
<html>
<head>
<title>YAKINDU FMU Code generator</title>
</head>

<body>
<h1>YAKINDU FMU Generator</h1>
	
<p>YAKINDU Statechart Tools supports the FMI (Functional Mockup Interfaces) standard by exporting FMUs (Fubctional Muckup Units) for YAKINDU statecharts. 
	Concretely the export of FMUs for FMI Co-Simulation version 2.0 is supported. The FMU export is implemented by a YAKINDU code generator. The generator 
	supports building FMUs for Windows, Linux and MacOS 64Bit platforms.</p>

<h2>Preconditions</h2>
	<p>The generator build a complete FMU and relies on Eclipse C development infrastructure. So as a precondition you have to make sure that CDT features are installed. For the Windows platform the Cygwin toolchain must be installed and include the <i>zip</i> command line tool. If not present use cygwin to install <i>zip</i>.

<h2>Creating a FMU</h2>
	If everything is in place a FMU can be created in a few simple steps: 

<ul>
<li>Create a C project within your workspace. Ensure the C nature is set for the project.</li>
<li>Choose an existing or create a new statechart. To create a new one:. 
<ul>
<li>Right-click on you project, Select <i>New -> Other -> YAKINDU SCT -> Statechart Model</i>.</li>
<li>Choose between <b>Default Domain</b> or <b>C/C++ Domain</b>.</li>
</ul>
</li> 

<li>Create a Code generator model
<ul>
<li>Right-click on your project, Select <i>New -> Other -> YAKINDU SCT -> Code generator model</i>.</li>
<li>Enter a filename for the <i>.sgen</i> file and select <i>Next</i>.</li>
<li>Choose YAKINDU SCT FMU Code Generator from the dropdown and the top and tick the statechart you previously created.</li>
<li>The generated <i>.sgen</i> file should have the follwing content. If not modify it accordingly. Replace <i>machine</i> by the name of your statechaert and replace <i>example</i> by the name of your target project. The target project may be different from the project in which the statechart is located.</li>
<pre><code>GeneratorModel for yakindu::c::fmu {

	statechart machine {
		
		feature Outlet {
			targetProject =  "example" 
			targetFolder =  "src" 
		}		
	}	
	
}
</code></pre>
<li>If the content is different then modify it accordingly. Replace <i>machine</i> by the name of your statechart and replace <i>example</i> by the name of your target project. The target project may be different from the project in which the statechart is located.</li>
</ul>
</li>

<li>Now generate the <i>.fmu</i> file by right-click on the <i>.sgen</i> file and select <i>Generate Code Artifacts</i>
<ul>
<li>The internal Build of your project should be triggered, indicating that the target FMU has been built successfully into the <b>Debug/Release</b> folder of your project.</li>
<li>Due to convention the <i>.fmu</i> file will always be named as your project name.</li>
</ul>
</li>
</ol>
</ul>
</p>

<h2>Configuring the Functional Mockup Unit (FMU)</h2>

In order to add functionality to the FMU, you need to edit the statechart you created earlier.<br/>
<u><b>Note:</b></u>
<ul>
<li>For now you can not use <code>string</code> or <code>float</code> variables! Only <code>integer</code>, <code>boolean</code> and <code>real/double</code> typed variables will be used for generating FMUs. </li>
<li>Events are not yet supported for generating a FMU.</li>
<li>Only <code>@CycleBased</code> annotation is supported.</li>
</ul>
All variables you declare in your statechart will be used as FMU input variables by default.
To define FMU output variables you need to specify the <code>readonly</code> modifier for the variable.

<u>FMU input/output variable example:</u>
<ul>
<li> Default Domain:
	<pre><code>interface IO:
var x: integer = 0 		//input variable
var y: boolean = true 		//input variable
var readonly z: real = 5.2 	//output variable
</code></pre></li>
<li> C/C++ Domain:
<pre><code>interface IO:
var x: int8_t = 0 		//input variable
var y: bool = true 		//input variable
var readonly z: double = 5.2 	//output variable
	</code> </pre>
	</li>
	</ul>



</body>
</html>
