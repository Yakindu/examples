<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
			<title>YAKINDU Sensor Array example</title>
			<link href="../css/style.css" rel="stylesheet">
	</head>
	<body class="body-container">

		<h1>YAKINDU Sensor Array pro example</h1>
		<p class="pro-feature">
			This is an example for the handling of arrays imported from usercode
			in SCT. You can see how iterating an array in SCT is possible and how
			to make the best use of arrays.
			<img class="standard-image" alt="The sensor statechart in all its details"
				src="images/sensor_model.png" />
		</p>
		<p>The context of this example are ultrasonic sensors. These are
			frequently
			used in robotics to measure the distance
			to the next solid
			object. They generate an ultrasonic sound, and when
			the
			soundwave is
			reflected by a solid object back to the sensor, the time taken
			for the
			roundtrip can be used to determine the distance. The quality
			of the
			result can vary greatly with the geometric orientation and the
			material of
			the object. Surfaces not parallel to the sensor can
			generate multiple
			echos,
			and soft tissues like carpet and similar can
			absorb the signal
			completely.</p>
		<p>To rule out these effects, the measurements are often filtered.
			This statechart shows one of the simplest methods of filtering â€“
			the
			mean and the standard deviation are calculated and the mean
			is
			returned as long as the standard deviation is not greater than
			a
			threshold value, indicating that
			all measurements were in a close
			margin to each other.
		</p>
		<h3>Statechart and source code</h3>
		<p>
			First you may want to take a look at the model and source code
			artifacts.
			These
			are all located in the 'src' folder. The generated
			files are located in
			'src/model/src-gen' and 'src/model/src'.
			'src/sensor_utils.c'
			contains the
			user-defined functions which are
			declared in 'src/sensor_utils.h', additionally
			to the used array.
		</p>
		<p>
			The model basically shows how to take a measurement multiple times,
			store the values in an array, calculate the mean and standard
			deviation and so forth. Calling a function with an array as argument
			is shown as well.
		</p>
		<h3>Set up your system</h3>
		<p>
			As mentioned above you need a compiler tool chain and the 'pthread'
			libraries.
			If you have a Linux or Mac OS Xsystem you likely have
			everything
			installed. If
			you run Windows than we propose to install
			cygwin tools
			(https://www.cygwin.com).
		</p>
		<h3>Set up the roject</h3>
		<p>
			This project is preconfigured for Linux and gcc. If you use another
			system:
			<ul>
				<li>right-click on project 'coffee_machine' in the 'Project
					Explorer'</li>
				<li>choose 'Properties'	</li>
				<li>a dialog appears - choose 'C/C++ Build'</li>
				<li>select 'Tool Chain Editor'</li>
				<li>choose the appropriate tool chain for 'current tool chain'</li>
				<li>click 'OK'</li>
			</ul>
			... and your project should be ready to build
		</p>
		<h3>Build</h3>
		<p>
			<ul>
				<li>right-click on project 'coffee_machine' in the 'Project
					Explorer'</li>
				<li> choose 'Build Project'</li>
			</ul>
		</li>
		</p>
		<h3>Run the example</h3>
		<p>
			In the 'Debug' or 'Release' folder you will find an executable
			'sensor.exe'
			(even on Linux and Mac OS X). Right-click on this and
			choose:
			- 'Run As > Local C/C++ Application'.
			The embedded Eclipse
			console shows up and you can follow the
			instructions.
		</p>
		<br />
		<h3>Simulate</h3>
		<p>
			Additionally you can simulate the statechart by right-click and
			choose:
			- 'Run As > Statechart Simulation'
			You'll find more information
			on using the simulation in the help.
		</p>
		<h3>change the model</h3>
		<p>
			You may want to change or extend the model. Within the embedded
			expression editor
			you can press 'Ctrl-Space' to get proposals, which
			also include the C
			elements from
			the imported C header files.
		</p>
		<h3>Generate state machine code</h3>
		<p>
			If you have changed the model you can generate state machine code by
			right-click on
			'sensor.sgen' and choose 'Generate Code Artefacts'.
			This will generate:
			<ul>
				<li> Sensor.d</li>
				<li> Sensor.o</li>
			</ul>
		</p>
	</body>
</html>