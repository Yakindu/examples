<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>[Pro] Music Player (Java)</title>
<link href="../css/style.css" rel="stylesheet">
</head>
<body class="body-container">
  <div class="primary">

    <h1>[Pro] Music Player (Java)</h1>

    <h2>Overview</h2>
    This is a comprehensive example for the deep Java integration in YAKINDU Statechart Tools. The developed statechart controls a music player with a JavaFX based UI. The UI consists of 5 buttons: Play, Pause, Stop, Previous and Next. Clicking a button raises an event in the statechart which reacts accordingly by calling operations on the Java-based music player implementation. Additionally, the statechart controls which buttons are enabled in which context, e.g. the Play button gets disabled when a song is playing.
    <p>
    <img
        alt="The music player UI written in JavaFX"
        src="images/MusicPlayer_UI.png" />
    <img
        alt="The music player statechart"
        src="images/MusicPlayer_model.png" />
</p>
<p>
    This is an example for the deep Java integration demonstrating the following features:
    <ul>
    <li>Importing arbitrary (manually written as well as system libraries) Java classes in the statechart</li>
    <li>Calling Java methods in the statechart</li>
    <li>Live invocation of Java methods during simulation</li>
    <li>Code generation for Java domain statecharts</li>
    </ul>
</p>
<h2>Requirements</h2>
<p>
    For this example to work, you need:
    <ul>
    <li>Java 8 installed on your computer (JDK)</li>
    <li>YAKINDU Statechart Tools version 3.5.x</li>
    <li>The Java Domain feature installed:</li>
    <ul>
        <li>Open the installation wizard with 'Help -> Install New Software..'</li>
        <li>Use 'http://updates.yakindu.com/statecharts/labs' as update site</li>
        <li>Select 'YAKINDU Statechart Tools Java Domain' and click on Finish</li>
    </ul>
    </ul>
    </p>
    <h2>Run the built-in simulation</h2>
    <p>
    You can simulate the statechart without starting the JavaFX Application. This allows you to test the behavior of your system before using the generated code.
    <ul>
        <li>Right-click on player.sct and choose 'Run As > Statechart Simulation'</li>
        <li>In the Simulation View on the right you can simulate button clicks by clicking on 'default > playPressed', for example</li>
        <li>As the simulation directly calls the used Java methods you should already here a sound when simulating the play button</li>
    </ul>
</p>
    <h2>Run the MusicPlayer App</h2>
    <p>
    You can run the music player application like any other Java application. It uses the generated state machine code under the hood. Take a look into MusicPlayer.java to understand how the UI is linked with the statechart.
    <ul>
        <li>Right-click on MusicPlayerApp.java and choose 'Run As > Java Application'</li>
        <li>The UI pops up and you can click on the buttons</li>
        <li>The music player behavior is completely backed by the generated statechart code</li>
    </ul>
    </p>
    <h2>Limitations</h2>
    <p>
    Currently, the Java integration feature has the following known limitations:
    <ul>
    <li>It is not possible to use constructors for instantiation of statechart variables</li>
    <ul>
        <li>One way to overcome this is to use static factory methods, see Song.from() in the example</li>
        <li>During simulation, SCT tries to invoke the default constructor for statechart variables. That also means, that you might not be able to use interfaces, like java.lang.List for statechart variables. That is why java.lang.ArrayList is used in the example.</li>
    </ul>
    </ul>
    </p>
  </div>
</body>
</html>
