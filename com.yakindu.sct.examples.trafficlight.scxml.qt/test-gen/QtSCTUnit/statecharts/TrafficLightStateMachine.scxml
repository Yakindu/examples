<?xml version="1.0" encoding="UTF-8"?>
<scxml xmlns="http://www.w3.org/2005/07/scxml" version="1.0" datamodel="ecmascript" name="TrafficLightStateMachine" initial="working">
	<state id="trafficlight">
		<state id="working">
			<initial>
				<transition target="red" type="internal" />
			</initial>
			<state id="yellow">
				<initial>
					<transition target="switchToGreen" type="internal" />
				</initial>
				<state id="switchToGreen">
					<onentry>
						<send event="switchToGreen_t_0_timeEvent_0" delay="1s"/>
					</onentry>
					<onexit>
						<cancel sendid="switchToGreen_t_0_timeEvent_0" />
					</onexit>
					<onentry>
							<send event="goGreen">
							</send>
					</onentry>
					<transition event="switchToGreen_t_0_timeEvent_0"  target="green">
					</transition>
				</state>
				<state id="switchToRed">
					<onentry>
						<send event="switchToRed_t_0_timeEvent_0" delay="1s"/>
					</onentry>
					<onexit>
						<cancel sendid="switchToRed_t_0_timeEvent_0" />
					</onexit>
					<onentry>
							<send event="goRed">
							</send>
					</onentry>
					<transition event="switchToRed_t_0_timeEvent_0"  target="red">
					</transition>
				</state>
			</state>
			<state id="red">
				<onentry>
					<send event="red_t_0_timeEvent_0" delay="3s"/>
				</onentry>
				<onexit>
					<cancel sendid="red_t_0_timeEvent_0" />
				</onexit>
				<onentry>
						<send event="startGoingGreen">
						</send>
				</onentry>
				<transition event="red_t_0_timeEvent_0"  target="switchToGreen">
				</transition>
			</state>
			<state id="green">
				<onentry>
					<send event="green_t_0_timeEvent_0" delay="3s"/>
				</onentry>
				<onexit>
					<cancel sendid="green_t_0_timeEvent_0" />
				</onexit>
				<onentry>
						<send event="startGoingRed">
						</send>
				</onentry>
				<transition event="green_t_0_timeEvent_0"  target="switchToRed">
				</transition>
			</state>
			<transition event="smash"  target="broken">
			</transition>
		</state>
		<state id="broken">
			<initial>
				<transition target="blinking" type="internal" />
			</initial>
			<state id="blinking">
				<onentry>
					<send event="blinking_t_0_timeEvent_0" delay="1s"/>
				</onentry>
				<onexit>
					<cancel sendid="blinking_t_0_timeEvent_0" />
				</onexit>
				<onentry>
						<send event="unblink">
						</send>
				</onentry>
				<transition event="blinking_t_0_timeEvent_0"  target="notBlinking">
				</transition>
			</state>
			<state id="notBlinking">
				<onentry>
					<send event="notBlinking_t_0_timeEvent_0" delay="1s"/>
				</onentry>
				<onexit>
					<cancel sendid="notBlinking_t_0_timeEvent_0" />
				</onexit>
				<onentry>
						<send event="blink">
						</send>
				</onentry>
				<transition event="notBlinking_t_0_timeEvent_0"  target="blinking">
				</transition>
			</state>
			<transition event="repair"  target="working">
			</transition>
		</state>
	</state>
</scxml>
