<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>C++ Code Generation for SCTUnit with GTest</title>
	<link href="./css/style.css" rel="stylesheet">
	
</head>
<body class="body-container">
	<div class="primary">

		<h1>C++ Code Generation for SCTUnit with GTest</h1>
		<p>This example demonstrates how to generate GTest code from SCTUnit tests and how to set everything up. The test program can be compiled, executed and integrated in your build process easily.
		</p>

		<h2>Example application</h2>
		<p>
			The example application and SCTUnit test is based on the previous example <i>Testing State Machines with SCTUnit</i>. You can check it out in the example wizard or visit on our homepage: 
		<p>
			<a href="https://www.itemis.com/en/yakindu/state-machine/documentation/examples/org-yakindu-sct-examples-sctunit">Testing State Machines with SCTUnit</a>.
		</p>
		</p>
		<p>
			<img class="large" 
			alt="Light switch model" title="Light switch model" border="0" src="images/model.png"/>
		</p>
		<h2>GoogleTest - GTest</h2>
		<p>
			GTest is a multi-platform testing framework written in C++ by Google. It allows writing tests for C and C++. You can find the repository here: <a href="https://github.com/google/googletest">https://github.com/google/googletest</a>.
		</p>

		<h3>Installing GTest</h3>
		<p>
			The installation of GTest is based on your operating system. Google provides generic installation instructions: 
			<p>
				<a href="https://github.com/google/googletest/blob/master/googletest/README.md">https://github.com/google/googletest/blob/master/googletest/README.md</a>.
			</p>
		</p>
		<h3>Setup Projects Properties</h3>
		<p>
			For compiling a C++ project in Eclipse is required. Additionnally, the <code>gmock_main</code> and <code>pthread</code> library must be added to the C++ Linker is required. For this test project, the project has already been configured. However, if you want to create your own projects executing tests, you need to add the libraries them. Note: The including order of the library is important!
		</p>
		<p>
			<img class="large" alt="C++ Linker" title="C++ Linker" border="0" src="images/linker_libraries.png"/>
		</p>

		<h2>Test Code Generation</h2>
		<p>
			Code generation for C++ code has already shown step by step in the previous example <i>C++ Code Generation</i>. You can check it out in the example wizard or visit on our homepage: <a href="https://www.itemis.com/en/yakindu/state-machine/documentation/examples/org-yakindu-sct-examples-codegen-cpp">C++ Code Generation</a>. This example contains a code generator <code>cpp.sgen</code> file for generating the state machine code, which is required. Additionally to that, the <code>tests</code> folder contains a code generator file for the SCTUnit file: <code>cpp_test.sgen</code>. The generator ID for this example is <code>sctunit::cpp</code>. You can right click the generator file and generate the code artifacts. This will generate a GTest file (.cc), which can be compiled and executed. You can change the test file and regenerate the test.
		</p>
		<p>
			<script src="https://gist-it.appspot.com/github/Yakindu/examples/blob/issue-214-sctunit-examples/org.yakindu.sct.examples.sctunit.cpp/tests/cpp_test.sgen"></script>
		</p>
		<h2>Compiling and execution</h2>
		<p>
			After generating the code, the project can be compiled: <i>Right click</i>-><i>Build project</i>. After this you can run the created binary. This is the test output:
		</p>
		<p>
			<img class="large" alt="GTest output" title="GTest output" border="0" src="images/testoutput.png"/>
		</p>
	</div>
</body>
</html>
